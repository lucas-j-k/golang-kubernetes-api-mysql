apiVersion: projectcontour.io/v1
kind: HTTPProxy
metadata:
  name: go-microservices-routing
  namespace: go-microservices
spec:
  virtualhost:
    fqdn: api.notes.localhost
  routes:
    - conditions:
      - prefix: /user
      services:
        - name: user-service
          port: 80
      pathRewritePolicy:
        replacePrefix:
        - prefix: /user
          replacement: /
    - conditions:
      - prefix: /notes
      services:
        - name: note-service
          port: 80
      pathRewritePolicy:
        replacePrefix:
        - prefix: /notes
          replacement: /